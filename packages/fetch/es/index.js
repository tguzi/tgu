import{__rest as t,__assign as r}from"tslib";var e=function(){this.__data__=[],this.size=0};var n=function(t,r){return t===r||t!=t&&r!=r};var o=function(t,r){for(var e=t.length;e--;)if(n(t[e][0],r))return e;return-1},a=Array.prototype.splice;var i=function(t){var r=this.__data__,e=o(r,t);return!(e<0)&&(e==r.length-1?r.pop():a.call(r,e,1),--this.size,!0)};var u=function(t){var r=this.__data__,e=o(r,t);return e<0?void 0:r[e][1]};var c=function(t){return o(this.__data__,t)>-1};var s=function(t,r){var e=this.__data__,n=o(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this};function f(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}f.prototype.clear=e,f.prototype.delete=i,f.prototype.get=u,f.prototype.has=c,f.prototype.set=s;var l=f;var v=function(){this.__data__=new l,this.size=0};var p=function(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e};var h=function(t){return this.__data__.get(t)};var y=function(t){return this.__data__.has(t)},d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function b(t,r){return t(r={exports:{}},r.exports),r.exports}var _="object"==typeof d&&d&&d.Object===Object&&d,j="object"==typeof self&&self&&self.Object===Object&&self,g=_||j||Function("return this")(),m=g.Symbol,O=Object.prototype,w=O.hasOwnProperty,A=O.toString,P=m?m.toStringTag:void 0;var E=function(t){var r=w.call(t,P),e=t[P];try{t[P]=void 0;var n=!0}catch(t){}var o=A.call(t);return n&&(r?t[P]=e:delete t[P]),o},T=Object.prototype.toString;var x=function(t){return T.call(t)},z=m?m.toStringTag:void 0;var R=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":z&&z in Object(t)?E(t):x(t)};var q=function(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)};var S,F=function(t){if(!q(t))return!1;var r=R(t);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r},U=g["__core-js_shared__"],D=(S=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"";var C=function(t){return!!D&&D in t},M=Function.prototype.toString;var L=function(t){if(null!=t){try{return M.call(t)}catch(t){}try{return t+""}catch(t){}}return""},$=/^\[object .+?Constructor\]$/,B=Function.prototype,H=Object.prototype,I=B.toString,k=H.hasOwnProperty,G=RegExp("^"+I.call(k).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var N=function(t){return!(!q(t)||C(t))&&(F(t)?G:$).test(L(t))};var K=function(t,r){return null==t?void 0:t[r]};var V=function(t,r){var e=K(t,r);return N(e)?e:void 0},W=V(g,"Map"),J=V(Object,"create");var Q=function(){this.__data__=J?J(null):{},this.size=0};var X=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},Y=Object.prototype.hasOwnProperty;var Z=function(t){var r=this.__data__;if(J){var e=r[t];return"__lodash_hash_undefined__"===e?void 0:e}return Y.call(r,t)?r[t]:void 0},tt=Object.prototype.hasOwnProperty;var rt=function(t){var r=this.__data__;return J?void 0!==r[t]:tt.call(r,t)};var et=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=J&&void 0===r?"__lodash_hash_undefined__":r,this};function nt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}nt.prototype.clear=Q,nt.prototype.delete=X,nt.prototype.get=Z,nt.prototype.has=rt,nt.prototype.set=et;var ot=nt;var at=function(){this.size=0,this.__data__={hash:new ot,map:new(W||l),string:new ot}};var it=function(t){var r=typeof t;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t};var ut=function(t,r){var e=t.__data__;return it(r)?e["string"==typeof r?"string":"hash"]:e.map};var ct=function(t){var r=ut(this,t).delete(t);return this.size-=r?1:0,r};var st=function(t){return ut(this,t).get(t)};var ft=function(t){return ut(this,t).has(t)};var lt=function(t,r){var e=ut(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this};function vt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}vt.prototype.clear=at,vt.prototype.delete=ct,vt.prototype.get=st,vt.prototype.has=ft,vt.prototype.set=lt;var pt=vt;var ht=function(t,r){var e=this.__data__;if(e instanceof l){var n=e.__data__;if(!W||n.length<199)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new pt(n)}return e.set(t,r),this.size=e.size,this};function yt(t){var r=this.__data__=new l(t);this.size=r.size}yt.prototype.clear=v,yt.prototype.delete=p,yt.prototype.get=h,yt.prototype.has=y,yt.prototype.set=ht;var dt=yt,bt=function(){try{var t=V(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var _t=function(t,r,e){"__proto__"==r&&bt?bt(t,r,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[r]=e};var jt=function(t,r,e){(void 0!==e&&!n(t[r],e)||void 0===e&&!(r in t))&&_t(t,r,e)};var gt=function(t){return function(r,e,n){for(var o=-1,a=Object(r),i=n(r),u=i.length;u--;){var c=i[t?u:++o];if(!1===e(a[c],c,a))break}return r}}(),mt=b((function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e?g.Buffer:void 0,a=o?o.allocUnsafe:void 0;t.exports=function(t,r){if(r)return t.slice();var e=t.length,n=a?a(e):new t.constructor(e);return t.copy(n),n}})),Ot=g.Uint8Array;var wt=function(t){var r=new t.constructor(t.byteLength);return new Ot(r).set(new Ot(t)),r};var At=function(t,r){var e=r?wt(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)};var Pt=function(t,r){var e=-1,n=t.length;for(r||(r=Array(n));++e<n;)r[e]=t[e];return r},Et=Object.create,Tt=function(){function t(){}return function(r){if(!q(r))return{};if(Et)return Et(r);t.prototype=r;var e=new t;return t.prototype=void 0,e}}();var xt=function(t,r){return function(e){return t(r(e))}}(Object.getPrototypeOf,Object),zt=Object.prototype;var Rt=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||zt)};var qt=function(t){return"function"!=typeof t.constructor||Rt(t)?{}:Tt(xt(t))};var St=function(t){return null!=t&&"object"==typeof t};var Ft=function(t){return St(t)&&"[object Arguments]"==R(t)},Ut=Object.prototype,Dt=Ut.hasOwnProperty,Ct=Ut.propertyIsEnumerable,Mt=Ft(function(){return arguments}())?Ft:function(t){return St(t)&&Dt.call(t,"callee")&&!Ct.call(t,"callee")},Lt=Array.isArray;var $t=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var Bt=function(t){return null!=t&&$t(t.length)&&!F(t)};var Ht=function(t){return St(t)&&Bt(t)};var It=function(){return!1},kt=b((function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e?g.Buffer:void 0,a=(o?o.isBuffer:void 0)||It;t.exports=a})),Gt=Function.prototype,Nt=Object.prototype,Kt=Gt.toString,Vt=Nt.hasOwnProperty,Wt=Kt.call(Object);var Jt=function(t){if(!St(t)||"[object Object]"!=R(t))return!1;var r=xt(t);if(null===r)return!0;var e=Vt.call(r,"constructor")&&r.constructor;return"function"==typeof e&&e instanceof e&&Kt.call(e)==Wt},Qt={};Qt["[object Float32Array]"]=Qt["[object Float64Array]"]=Qt["[object Int8Array]"]=Qt["[object Int16Array]"]=Qt["[object Int32Array]"]=Qt["[object Uint8Array]"]=Qt["[object Uint8ClampedArray]"]=Qt["[object Uint16Array]"]=Qt["[object Uint32Array]"]=!0,Qt["[object Arguments]"]=Qt["[object Array]"]=Qt["[object ArrayBuffer]"]=Qt["[object Boolean]"]=Qt["[object DataView]"]=Qt["[object Date]"]=Qt["[object Error]"]=Qt["[object Function]"]=Qt["[object Map]"]=Qt["[object Number]"]=Qt["[object Object]"]=Qt["[object RegExp]"]=Qt["[object Set]"]=Qt["[object String]"]=Qt["[object WeakMap]"]=!1;var Xt=function(t){return St(t)&&$t(t.length)&&!!Qt[R(t)]};var Yt=function(t){return function(r){return t(r)}},Zt=b((function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e&&_.process,a=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=a})),tr=Zt&&Zt.isTypedArray,rr=tr?Yt(tr):Xt;var er=function(t,r){if(("constructor"!==r||"function"!=typeof t[r])&&"__proto__"!=r)return t[r]},nr=Object.prototype.hasOwnProperty;var or=function(t,r,e){var o=t[r];nr.call(t,r)&&n(o,e)&&(void 0!==e||r in t)||_t(t,r,e)};var ar=function(t,r,e,n){var o=!e;e||(e={});for(var a=-1,i=r.length;++a<i;){var u=r[a],c=n?n(e[u],t[u],u,e,t):void 0;void 0===c&&(c=t[u]),o?_t(e,u,c):or(e,u,c)}return e};var ir=function(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n},ur=/^(?:0|[1-9]\d*)$/;var cr=function(t,r){var e=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==e||"symbol"!=e&&ur.test(t))&&t>-1&&t%1==0&&t<r},sr=Object.prototype.hasOwnProperty;var fr=function(t,r){var e=Lt(t),n=!e&&Mt(t),o=!e&&!n&&kt(t),a=!e&&!n&&!o&&rr(t),i=e||n||o||a,u=i?ir(t.length,String):[],c=u.length;for(var s in t)!r&&!sr.call(t,s)||i&&("length"==s||o&&("offset"==s||"parent"==s)||a&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||cr(s,c))||u.push(s);return u};var lr=function(t){var r=[];if(null!=t)for(var e in Object(t))r.push(e);return r},vr=Object.prototype.hasOwnProperty;var pr=function(t){if(!q(t))return lr(t);var r=Rt(t),e=[];for(var n in t)("constructor"!=n||!r&&vr.call(t,n))&&e.push(n);return e};var hr=function(t){return Bt(t)?fr(t,!0):pr(t)};var yr=function(t){return ar(t,hr(t))};var dr=function(t,r,e,n,o,a,i){var u=er(t,e),c=er(r,e),s=i.get(c);if(s)jt(t,e,s);else{var f=a?a(u,c,e+"",t,r,i):void 0,l=void 0===f;if(l){var v=Lt(c),p=!v&&kt(c),h=!v&&!p&&rr(c);f=c,v||p||h?Lt(u)?f=u:Ht(u)?f=Pt(u):p?(l=!1,f=mt(c,!0)):h?(l=!1,f=At(c,!0)):f=[]:Jt(c)||Mt(c)?(f=u,Mt(u)?f=yr(u):q(u)&&!F(u)||(f=qt(c))):l=!1}l&&(i.set(c,f),o(f,c,n,a,i),i.delete(c)),jt(t,e,f)}};var br=function t(r,e,n,o,a){r!==e&&gt(e,(function(i,u){if(a||(a=new dt),q(i))dr(r,e,u,n,t,o,a);else{var c=o?o(er(r,u),i,u+"",r,e,a):void 0;void 0===c&&(c=i),jt(r,u,c)}}),hr)};var _r=function(t){return t};var jr=function(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)},gr=Math.max;var mr=function(t,r,e){return r=gr(void 0===r?t.length-1:r,0),function(){for(var n=arguments,o=-1,a=gr(n.length-r,0),i=Array(a);++o<a;)i[o]=n[r+o];o=-1;for(var u=Array(r+1);++o<r;)u[o]=n[o];return u[r]=e(i),jr(t,this,u)}};var Or=function(t){return function(){return t}},wr=bt?function(t,r){return bt(t,"toString",{configurable:!0,enumerable:!1,value:Or(r),writable:!0})}:_r,Ar=Date.now;var Pr=function(t){var r=0,e=0;return function(){var n=Ar(),o=16-(n-e);if(e=n,o>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}(wr);var Er=function(t,r){return Pr(mr(t,r,_r),t+"")};var Tr=function(t,r,e){if(!q(e))return!1;var o=typeof r;return!!("number"==o?Bt(e)&&cr(r,e.length):"string"==o&&r in e)&&n(e[r],t)};var xr,zr,Rr=function(t){return Er((function(r,e){var n=-1,o=e.length,a=o>1?e[o-1]:void 0,i=o>2?e[2]:void 0;for(a=t.length>3&&"function"==typeof a?(o--,a):void 0,i&&Tr(e[0],e[1],i)&&(a=o<3?void 0:a,o=1),r=Object(r);++n<o;){var u=e[n];u&&t(r,u,n,a)}return r}))}((function(t,r,e){br(t,r,e)}));!function(t){t.GET="GET",t.POST="POST",t.PUT="PUT",t.DELETE="DELETE",t.PATCH="PATCH",t.HEAD="HEAD",t.COMMON="COMMON"}(xr||(xr={})),function(t){t.arraybuffer="arraybuffer",t.blob="blob",t.json="json",t.text="text",t.formData="formData"}(zr||(zr={}));var qr=function(){var t=this;this.handlers=[],this.use=function(r,e){return t.handlers.push({fulfilled:r,rejected:e}),t.handlers.length-1},this.eject=function(r){t.handlers[r]&&(t.handlers[r]=null)},this.forEach=function(r){t.handlers.forEach((function(t){null!==t&&r(t)}))}},Sr=function(e){var n=this;this.RequestMethod=xr,this.setConfig=function(t){n.defaults=Rr(n.defaults,t)},this.initConfig=function(t){var r=Rr(n.defaults,t);if(r.method||(r.method=xr.GET),!xr[r.method])throw new Error("Request type "+r.method+" does not exist");if(!r.url)throw new Error("Request URL cannot be empty");if(r.headers=new Headers(t.headers),r.params){var e=r.url,o=n.parseParamKey(r.params);e&&-1!==e.indexOf("?")?e+="&"+o:e+="?"+o,r.url=e}return r},this.parseParamKey=function(t,r){var e="";if(-1!==["string","number","boolean"].indexOf(typeof t))e+="&"+r+"="+encodeURIComponent(t);else for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var a=t[o],i=null==r?o:r+(t instanceof Array?"":"."+o);e+="&"+n.parseParamKey(a,i)}return e.substr(1)},this.request=function(t){var r=n.initConfig(t),e=[n.dispatchRequest,void 0],o=Promise.resolve(r);for(n.interceptors.request.forEach((function(t){t&&e.unshift(t.fulfilled,t.rejected)})),n.interceptors.response.forEach((function(t){t&&e.push(t.fulfilled,t.rejected)}));e.length;)o=o.then(e.shift(),e.shift());return Promise.race([o,new Promise((function(r,e){var n,o=void 0!==t.timeout?t.timeout:5e3,a=0,i=function(t){if(a||(a=t),t-a>o){cancelAnimationFrame(n);var r=new Error("请求超时");r.code=500,e(r)}else n=requestAnimationFrame(i)};o&&(n=requestAnimationFrame(i))}))])},this.dispatchRequest=function(e){var n=e.url,o=e.baseURL,a=void 0===o?"":o,i=e.body,u=e.headers,c=(e.transformRequest,e.timeout,e.responseType),s=t(e,["url","baseURL","body","headers","transformRequest","timeout","responseType"]);if(!n)throw new Error("Request URL cannot be empty");return fetch(a+n,r(r({},s),{body:i,headers:new Headers(u)})).then((function(t){if(t.ok)return c===zr.json?t.json():c===zr.text?t.text():c===zr.arraybuffer?t.arrayBuffer():c===zr.blob?t.blob():c===zr.formData?t.formData():t.json();var r=new Error;throw r.res=t.json(),r}))},this.defaults=e,this.interceptors={request:new qr,response:new qr}},Fr=new Sr({});export default Fr;export{Sr as Fetch,qr as InterceptorManager};
//# sourceMappingURL=index.js.map
